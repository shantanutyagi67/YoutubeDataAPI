{"files":[{"id":"e1cf684c-8dd5-4bf0-8d74-a88a810d2c12","name":"appsscript","type":"json","source":"{\n  \"timeZone\": \"Asia/Kolkata\",\n  \"dependencies\": {\n    \"enabledAdvancedServices\": [{\n      \"userSymbol\": \"YouTube\",\n      \"serviceId\": \"youtube\",\n      \"version\": \"v3\"\n    }]\n  },\n  \"exceptionLogging\": \"STACKDRIVER\",\n  \"runtimeVersion\": \"V8\"\n}"},{"id":"8c0da98e-477c-4f41-a408-f63f55c9f429","name":"Copy of Code","type":"server_js","source":"/*\n\nThis Google Script will auto-update the title of your \nYouTube video based on the number of views and comments\n\nTutorial: www.labnol.org/update-youtube-title-200818\n\nAuthor: Amit Agarwal https://digitalinspiration.com/\n\nOriginal Idea by Tom Scott youtu.be/BxV14h0kFs0\n\n*/\n\nconst updateYouTubeVideo \u003d (e \u003d null) \u003d\u003e {\n  const id \u003d \"IOecG3lUv8A\";\n  const template \u003d \"This video has VIEWCOUNT views, LIKECOUNT likes and COMMENTCOUNT comments\";\n  const description \u003d \". This video shows how many views, likes and comments it has in the title. The title is updated every few minutes and not instantly so in case it does not work, refresh the page or check again after 1-5 minutes.\";\n  \n  // The cron job is created only when the script is run manually\n  if (e \u003d\u003d\u003d null) {\n    const triggerName \u003d \"updateYouTubeVideo\";\n    const triggers \u003d ScriptApp.getProjectTriggers().filter((trigger) \u003d\u003e {\n      return trigger.getHandlerFunction() \u003d\u003d\u003d triggerName;\n    });\n\n    // If time based trigger doesn\u0027t exist, create one that runs every 1 minute\n    if (triggers.length \u003d\u003d\u003d 0) {\n      ScriptApp.newTrigger(triggerName).timeBased().everyMinutes(5).create();\n    }\n  }\n\n  // Get the watch statistics of the video\n  const { items: [video \u003d {}] \u003d [] } \u003d YouTube.Videos.list(\n    \"snippet,statistics\",\n    {\n      id\n    }\n  );\n\n  // Parse the YouTube API response to get views and comment count\n  const {\n    snippet: { title: oldTitle, categoryId } \u003d {},\n    statistics: { viewCount, commentCount, likeCount } \u003d {}\n  } \u003d video;\n\n  if (viewCount \u0026\u0026 commentCount) {\n    const newTitle \u003d template\n      .replace(\"VIEWCOUNT\", viewCount)\n      //.replace(\"LIKECOUNT\", likeCount)\n      .replace(\"COMMENTCOUNT\", commentCount)\n      .replace(\"LIKECOUNT\", likeCount);\n\n    // If the video title has not changed, skip this step\n    if (oldTitle !\u003d\u003d newTitle) {\n      YouTube.Videos.update(\n                 { id: id, snippet: { title: newTitle, categoryId, description: newTitle + description } },\n        \"snippet\"\n      );\n    }\n  }\n};\n"}]}